

<div class="row"><div class="col-md-offset-2 col-md-8">
<h4><%= link_to "Back", :back %></h4>
<h4><%= @user.username %></h4>
</div></div>

<!-- profile data -->
<div class="row"><div class="col-md-offset-2 col-md-8">
	<table class="table">
		<tr>
			<td>First Name</td>
			<td><%= @user.user_profile.try(:first_name)  %></td>
		</tr>
		<tr><td>Last Name</td><td><%= @user.user_profile.try(:last_name)		%></td></tr>
		<tr><td>English Name</td><td><%= @user.user_profile.try(:english_name)%></td></tr>
		<tr><td>Birthdate</td><td><%= @user.user_profile.try(:birthdate)   %></td></tr>
		<tr><td>Intro</td><td><%= @user.user_profile.try(:intro)   %></td>
		<tr><td>Total visit</td><td><%= @user.post_articles.count %></td>
		<tr><td>Total posting articles</td><td><%= @user.post_articles.count	%></td>
		<tr><td>Total replying articles</td><td><%= @user.reply_articles.count %></td>
	</table>
</div>

<!-- My favorite articles -->
<% if @user == current_user %>
<div class="row"><div class="col-md-offset-1 col-md-10 user-show-post">
	<h4>My favorite articles</h4>
	<table class="table">
		<tr>
			<th class="user-show-favorite-table-index"></th>
			<th class="user-show-post-table-title">Title</th>
			<th class="user-show-post-table-comment">Comment</th>
			<th class="user-show-post-table-update">Update Date</th>
		</tr>

		<% @favorite_articles.each_with_index do |fa,index|%>
		<tr>
			<td class="user-show-favorite-table-index"><%= index+1 %></td>
			<td class="user-show-post-table-title"><%= link_to fa.title, article_path(fa)%></td>
			<td class="user-show-post-table-comment"><%= fa.comments.count %></td>
			<td class="user-show-post-table-update"><%=fa.updated_at%></td>
			<td class="user-show-post-table-remove"><%= link_to "Remove", favorite_user_path(current_user.id,:article_id=>fa.id), :method=>:delete, :class=>"btn btn-warning",:data=>{:confirm=>"Are you sure?"} %>
			</td>

		</tr>
		<% end %><!-- @user.favorite_articles.each_with_index -->
	</table>


<% end %>

<!-- Posted articles -->
<div class="row"><div class="user-show-post">
	<h4>Posted articles</h4>
	<table class="table user-show-post-table">
		<tr>
			<th class="user-show-post-table-index"></th>
			<th class="user-show-post-table-title">Title</th>
			<th class="user-show-post-table-comment">Comment</th>
			<th class="user-show-post-table-update">Update Date</th>
		</tr>
		<% @user.post_articles.order(:updated_at => :desc).each_with_index do |a,index| %>
		<tr>
			<td class="user-show-post-table-index"><%= index+1 %></td>
			<td class="user-show-post-table-title"><%= link_to a.title, article_path(a) %></td>
			<td class="user-show-post-table-comment"><%= a.comments.count %></td>
			<td class="user-show-post-table-update"><%=a.updated_at%></td>
		</tr>
		<%end %>
	</table>
</div>


<!-- commented articles -->
<div class="row"><div class="col-md-offset-2 col-md-8 user-show-comment">
	<h4>Commented articles</h4>
	<table class="table">
		<tr>
			<th class="user-show-comment-table-index"></th>
			<th class="user-show-comment-table-article">Article</th>
			<th class="user-show-comment-table-comment-content">Comment</th>
			<th class="user-show-comment-table-update">Date Time</th>
		</tr>
		<% @user.comments.order(:updated_at => :desc).each_with_index do |c,index| %>
			<% if c.article %>
		<tr>
			<td class="user-show-comment-table-index"><%= index+1 %></td>
			<td class="user-show-comment-table-article">
				<%= link_to c.article.title, article_path(c.article) %>
			</td>
			<td class="user-show-comment-table-comment-content">
				<%= link_to c.content, article_path(c.article)%>
			</td>
			<td class="user-show-comment-table-update">
				<%= c.updated_at %>
			</td>
		</tr>
			<% end %><!-- if c.article -->
		<% end %><!-- @user.comments .order -->
</div>


